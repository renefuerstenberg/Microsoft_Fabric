IMPORTANT:

The following prerequisites must also be considered:

1. An APP registration must be created with a secret.
2. In my example, I also use an Azure Key Vault to retrieve the corresponding IDs.
3. Additionally, I use parameters that also need to be filled in.
4. The APP must have CostManagement Reader rights on the subscription to be able to retrieve the cost data.